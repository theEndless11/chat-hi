"use strict";var express=require("express"),http=require("http"),socketIo=require("socket.io"),app=express(),server=http.createServer(app),io=socketIo(server),users=[],messages=[];app.use(express.static("public")),app.use(express.json()),app.post("/join",function(e,s){var n=e.body.username;users.includes(n)||users.push(n),s.json({username:n})}),io.on("connection",function(t){console.log("New user connected"),t.on("join",function(e){t.username=e,t.emit("message",{user:"System",text:"Welcome ".concat(e,"!")}),t.broadcast.emit("message",{user:"System",text:"".concat(e," has joined the chat.")})}),t.on("sendMessage",function(e,s){var n={user:t.username,text:e,timestamp:new Date};messages.push(n),io.emit("message",n),s()}),t.on("disconnect",function(){console.log("User disconnected")})}),app.get("/",function(e,s){s.sendFile(__dirname+"/public/index.html")});var PORT=process.env.PORT||5e3;server.listen(PORT,function(){console.log("Server running on port ".concat(PORT))});
//# sourceMappingURL=server.min.js.map
